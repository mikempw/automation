# Prometheus configuration for F5 Insight autoscale alerting.
#
# In production, add real scrape targets for BIG-IP SNMP exporters
# or node_exporters running on the Insight VM. For the PoC, you can
# push mock metrics via pushgateway or simply curl the webhook endpoint
# directly to simulate alert-triggered autoscale.

global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Alertmanager integration
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - "alertmanager:9093"

# Load alert rules
rule_files:
  - "/etc/prometheus/alert_rules.yml"

# Scrape targets
scrape_configs:
  # Prometheus self-monitoring
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # F5 Insight backend health
  - job_name: "insight-backend"
    metrics_path: "/health"
    scrape_interval: 30s
    static_configs:
      - targets: ["insight-backend:8000"]

  # BIG-IP SNMP exporter — uncomment and configure for real metrics
  # - job_name: "bigip-snmp"
  #   static_configs:
  #     - targets: ["snmp-exporter:9116"]
  #   metrics_path: "/snmp"
  #   params:
  #     module: ["f5_bigip"]
  #     target: ["192.168.1.20"]  # Master BIG-IP mgmt IP

  # Node exporter on Insight VM — uncomment for host-level metrics
  # - job_name: "node-exporter"
  #   static_configs:
  #     - targets: ["host.docker.internal:9100"]
